"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5075],{5075:(b,g,s)=>{s.r(g),s.d(g,{HomePageModule:()=>v});var d=s(177),a=s(4742),h=s(4341),m=s(9607),u=s(467),t=s(4438),p=s(9015),f=s(8058);const P=[{path:"",component:(()=>{var r;class i{constructor(e,l,n,o){this.alertController=e,this.tokenProvider=l,this.api=n,this.router=o}ngOnInit(){this.tokenProvider.getToken()&&this.router.navigate(["/animals"])}createUser(){var e=this;return(0,u.A)(function*(){e.api.get("usernames").subscribe(n=>{e.usernames=n||[],console.log(n)}),yield(yield e.alertController.create({header:"Benutzer Erstellen",inputs:[{name:"user_name",type:"text",placeholder:"Benutzername"},{name:"first_name",type:"text",placeholder:"Vorname"},{name:"last_name",type:"text",placeholder:"Nachname"},{name:"email",type:"email",placeholder:"Email"},{name:"pwd",type:"password",placeholder:"Passwort"},{name:"confirm_pwd",type:"password",placeholder:"Passwort best\xe4tigen"}],buttons:[{text:"Abbrechen",role:"cancel"},{text:"Best\xe4tigen",handler:n=>n.user_name&&n.first_name&&n.last_name&&n.email&&n.pwd&&n.confirm_pwd?n.pwd!==n.confirm_pwd?(e.showError("Das Passwort stimmt nicht \xfcberein"),!1):e.usernames.includes(n.user_name)?(e.showError("Benutzername ist bereits vergeben"),!1):(e.api.post("createUser",n).subscribe(o=>{console.log("Success",o),e.showSuccess("Benutzer erfolgreich erstellt")},o=>{console.log("Error",o),e.showError("Fehler beim Erstellen des Benutzers.\nError: "+o)}),!0):(e.showError("Alle Felder m\xfcssen ausgef\xfcllt werden"),!1)}]})).present()})()}showError(e){var l=this;return(0,u.A)(function*(){yield(yield l.alertController.create({header:"Fehler",message:e,buttons:["OK"]})).present()})()}showSuccess(e){var l=this;return(0,u.A)(function*(){yield(yield l.alertController.create({header:"Erfolg",message:e,buttons:["OK"]})).present()})()}login(){var e=this;return(0,u.A)(function*(){console.log("Login"),yield(yield e.alertController.create({header:"Login",inputs:[{name:"user_name",type:"text",placeholder:"Benutzername"},{name:"pwd",type:"password",placeholder:"Passwort"}],buttons:[{text:"Abbrechen",role:"cancel"},{text:"Best\xe4tigen",handler:n=>n.user_name&&n.pwd?(e.api.post("login",n).subscribe(o=>{e.tokenProvider.saveToken(o.token),window.sessionStorage.setItem("user_name",o.user_name),window.sessionStorage.setItem("user_id",o.user_id),window.setTimeout(()=>{window.location.reload()},1e3)},o=>{console.log("Error",o),e.showError("Fehler beim Einloggen.\nError: "+o)}),!0):(e.showError("Alle Felder m\xfcssen ausgef\xfcllt sein"),!1)}]})).present()})()}}return(r=i).\u0275fac=function(e){return new(e||r)(t.rXU(a.hG),t.rXU(p.I),t.rXU(f.G),t.rXU(m.Ix))},r.\u0275cmp=t.VBU({type:r,selectors:[["app-home"]],decls:14,vars:2,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[1,"button-container"],[3,"click"]],template:function(e,l){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3," Wildtier Sichtungen Login "),t.k0s()()(),t.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),t.EFF(8,"Blank"),t.k0s()()(),t.j41(9,"div",4)(10,"ion-button",5),t.bIt("click",function(){return l.login()}),t.EFF(11,"Anmelden"),t.k0s(),t.j41(12,"ion-button",5),t.bIt("click",function(){return l.createUser()}),t.EFF(13,"Benutzer Erstellen"),t.k0s()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0))},dependencies:[a.Jm,a.W9,a.eU,a.BC,a.ai],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.button-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh}ion-button[_ngcontent-%COMP%]{margin:10px 0}"]}),i})()}];let w=(()=>{var r;class i{}return(r=i).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.$C({type:r}),r.\u0275inj=t.G2t({imports:[m.iI.forChild(P),m.iI]}),i})(),v=(()=>{var r;class i{}return(r=i).\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.$C({type:r}),r.\u0275inj=t.G2t({imports:[d.MD,h.YN,a.bv,w]}),i})()}}]);